---
import { client } from "../lib/strapi";
import StrapiBlocks from "../strapi/BlocksRenderer";
import Layout from '../layouts/Layout.astro';

export async function getStaticPaths() {
  const { data: pages } = await client.collection("static-pages").find();

  return pages.map((page) => ({
    params: { slug: page.slug },
  }));
}

const { slug } = Astro.params;
const { data: pages } = await client.collection("static-pages").find({
  populate: "*",
});
const page = pages.filter(a => a.slug === slug)[0];
---

<Layout>
  <!-- Back link -->
  <div class="space-y-0">
    <div class="mb-2">
      <a href="/nina_judina/" class="text-xs text-neutral-500 hover:text-neutral-800 transition flex items-center gap-1">
        ← Zurück zu den Gemälden
      </a>
    </div>
    <div class="">
      <h1 id="work-heading" class="text-sm font-medium tracking-[0.3em] uppercase">
        {page.title}
      </h1>
    </div>
  </div>

  <div>
    <StrapiBlocks content={page.content} />
  </div>
</Layout>
